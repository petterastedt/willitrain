(this.webpackJsonpwillitrain=this.webpackJsonpwillitrain||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){e.exports=a.p+"static/media/rainy.8b92f956.svg"},14:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),i=a(2),s=a.n(i),l=a(3),u=a(1),h={fetchWeatherData:function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://cors-anywhere.herokuapp.com/",a="https://www.metaweather.com/api/location/".concat(t),e.next=4,fetch("https://cors-anywhere.herokuapp.com/"+a);case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),console.log("Error fetching weather data: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),fetchLocationData:function(){var e=Object(l.a)(s.a.mark((function e(t,a){var n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://cors-anywhere.herokuapp.com/",n=a?"https://www.metaweather.com/api/location/search/?lattlong=".concat(t,",").concat(a):"https://www.metaweather.com/api/location/search/?query=".concat(t),e.next=5,fetch("https://cors-anywhere.herokuapp.com/"+n);case 5:return r=e.sent,e.next=8,r.json();case 8:return o=e.sent,e.abrupt("return",o);case 12:e.prev=12,e.t0=e.catch(0),console.log("Error fetching woeid data: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}()},m=(a(12),function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"iconWrapper"},r.a.createElement("img",{src:a(13),alt:"cloud-icon",className:"header-icon"})),r.a.createElement("h1",{className:"header-h1"},"WILL IT RAIN TODAY?"))});function f(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(u.a)(i,2),l=s[0],h=s[1];return r.a.createElement("div",{className:"button "},r.a.createElement("button",{className:"button-trigger h3 ".concat(o&&"button--isClicked"),onClick:function(){return c(!0),void setTimeout((function(){e.getWeather(),h(!0),setTimeout((function(){h(!1)}),5e3)}),500)},disabled:l},"FIND OUT"))}var p=function(e){return r.a.createElement("div",{className:"location"},r.a.createElement("div",{className:"h4 location-title"},e.location[0].title))},d=function(e){return r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement("div",{className:"loader ".concat(e.isSmall&&"loader--isSmall")}))};function w(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(u.a)(i,2),l=s[0],h=s[1],m=Object(n.useState)(!1),f=Object(u.a)(m,2),p=f[0],d=f[1];return r.a.createElement("div",{className:"report"},r.a.createElement("div",{className:"h3 report-content ".concat(o&&"report-content--isAnimatedOut"," ").concat(l&&"report-content--isAnimatedIn")},e.weatherReport),p?r.a.createElement("div",{className:"report-back",onClick:function(){return e.resetValues()}},"Want to try with a different location?"):r.a.createElement("div",{className:"report-nextDay",onClick:function(){return c(!0),void setTimeout((function(){e.getWeatherReport(1),h(!0),d(!0)}),700)}},"How about tomorrow?"))}function b(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(u.a)(i,2),l=s[0],h=s[1],m=Object(n.useState)(null),f=Object(u.a)(m,2),p=f[0],w=f[1];Object(n.useEffect)((function(){c(!1),h(!1)}),[e.location]);return r.a.createElement("div",{className:"search"},l?r.a.createElement("form",{className:l?"search-form search-form--isAnimated":"search-form",onSubmit:function(t){return function(t){t.preventDefault(),e.searchLocation(p),e.resetError(),c(!0)}(t)}},r.a.createElement("input",{className:"search-field",placeholder:"Search for...",onChange:function(e){return w(e.target.value)},autoComplete:"off"}),o&&!e.error&&r.a.createElement("div",{className:"search-loaderWrapper"},r.a.createElement(d,{isSmall:!0}))):r.a.createElement("div",{className:"search-trigger",onClick:function(){return h(!l)}},"Not in ",e.location[0].title,"?"))}var v=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footer-text"},"Created by ",r.a.createElement("a",{href:"https://github.com/petterastedt",target:"_blank",rel:"noopener noreferrer","aria-label":"github link"},"Petter \xc5stedt"),". This website is using ",r.a.createElement("a",{href:"https://www.metaweather.com",target:"_blank",rel:"noopener noreferrer","aria-label":"link to metaweather api"},"MetaWeather API")," for accurate weather predictions."))};var g=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),i=Object(u.a)(c,2),g=i[0],E=i[1],j=Object(n.useState)(null),O=Object(u.a)(j,2),k=O[0],y=O[1],N=Object(n.useState)(null),S=Object(u.a)(N,2),x=S[0],W=S[1],C=Object(n.useState)(null),I=Object(u.a)(C,2),T=I[0],A=I[1];Object(n.useEffect)((function(){sessionStorage.length>0?setTimeout((function(){A([{title:sessionStorage.title,woeid:sessionStorage.woeid}])}),2e3):D()}),[]);var D=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation?(t=setTimeout((function(){return E("Please allow us to see your location")}),4e3),navigator.geolocation.getCurrentPosition(function(){var e=Object(l.a)(s.a.mark((function e(a){var n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(t),E("Getting your location.."),n=a.coords.latitude.toFixed(10),r=a.coords.longitude.toFixed(10),e.next=6,h.fetchLocationData(n,r);case 6:(o=e.sent)||E("Something went wrong when fetching your location.. (Weather API)"),A(o),sessionStorage.title=o[0].title,sessionStorage.woeid=o[0].woeid,E(null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){E("Something went wrong when fetching your location..(Location API)"),console.log("Error: ",e)}))):E("Geolocation is not supported by this browser.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split(" ").join("+"),e.next=3,h.fetchLocationData(a);case 3:void 0===(n=e.sent)||0===n.length?E("Couldn't find location, try searching for a bigger city nearby"):A(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g&&E(null),o(!0),e.next=4,h.fetchWeatherData(t);case 4:n=e.sent,o(!1),n?(W(n),Y(a,n)):E("Something went wrong when fetching the weather data..");case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Y=function(e,t){var a;a=t?t.consolidated_weather[e].weather_state_abbr:x.consolidated_weather[e].weather_state_abbr;var n={sn:"It's gonna snow! \ud83c\udf28\ufe0f",sl:"Yuck, sleet today \ud83d\ude16",h:"It's gonna hail! Stay inside! \ud83d\ude2c",t:"Yes, looks like theres a storm coming \u26c8\ufe0f",hr:"Yes, a lot \u2614",lr:"Yes, a little \ud83c\udf27\ufe0f",s:"Yes, some showers \ud83c\udf26\ufe0f",c:"No \ud83c\udf1e",hc:"No, lots of clouds though \u2601\ufe0f",lc:"No, looks fine \ud83c\udf24\ufe0f",default:"Yikes, something went wrong! \u274c"};y(n[a]||n.default)};return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement("div",{className:"wrapper"},k&&r.a.createElement(w,{getWeatherReport:Y,weatherReport:k,resetValues:function(){return y(null)}}),a&&r.a.createElement(d,null),T&&!k&&!a&&r.a.createElement(f,{getWeather:function(){return _(T[0].woeid,0)}}),T&&!k&&!a&&r.a.createElement(p,{location:T}),T&&!k&&!a&&r.a.createElement(b,{location:T,error:g,resetError:function(){return E(null)},searchLocation:L}),g&&r.a.createElement("div",{className:"error ".concat("Couldn't find location, try searching for a bigger city nearby"===g&&"error--isBlinking")},g)),r.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,t,a){e.exports=a(14)}},[[6,1,2]]]);
//# sourceMappingURL=main.0c3d449b.chunk.js.map